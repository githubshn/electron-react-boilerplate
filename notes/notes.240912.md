Plan to use react + eletron to build my file browser.

## 2024-09-12

```
npx create-react-app browser
```

创建初始文件就搞了半天，一直报错 \
https://blog.csdn.net/weixin_45610943/article/details/138140115 \
安装了一个 nrm 看上去对换源有帮助，不过好像没用上，在关掉 VPN 之后终于是创建好了 \
目前没有调源，用的默认源

安装 electron
```
cd ./browser
npm install --save-dev electron
```

接下来会逐步开发这个应用

## 2024-09-16
对于每个文件，它本身的文件名、所属的文件层次结构都不重要，只需要能够通过特定的方式找到他们，并能够知晓他们之间的关系即可。

例如对于一组照片，组织他们的方式是多样的，任何一种都不能够完全地覆盖所有的任务。

  * 按照时间组织照片
  * 按照地点组织照片
  * 按照人物组织照片
  * 衍生照片-如修图，裁剪，压缩，AI重绘等

文件名和类似资源管理器的层次结构组织方式都只是为了服务于以上的任务的。
事实上，在不考虑硬件存储方面的问题时，给文件打标签，给标签组织结构可能是更优的方案。

还是以照片为例，给文件本身唯一编号，使得系统能够区分他们即可；
此外，用户需要提供各个维度上的信息，如

  * 照片中的人物（无序，或带权重）
  * 照片的时间、地点、内容
  * 照片的其他信息
  * 类似照片、衍生图像等关系信息
  * ...

然后这些信息按照标签的方式存储，并建立索引；标签可以存在层次结构，如人物可以分组，地点可以分组，活动可以分类等等；
寻找特定照片（组）时按照标签进行查询即可。

这也是这个项目（目前）想要达成的目标。

## 2024-09-26
隔了一段时间了，仍然没有想好到底使用什么样的数据结构来存储这些数据。

要记录的信息包括两种
  * 单文件信息，可能有多种类别的信息，包括标签，属性值等
  * 文件之间的关系，
    * 原子上的关系记录两个文件之间的关系
      * 衍生（由各种操作导致的衍生文件，如修改、拷贝、输出文件）
      * 平行版本
    * 多文件的关系
      * 考虑多步操作合成流程
      * 流程会整合操作，包括由于限制双文件关系时，被拆开记录的多输入多输出流程
  * 记录信息可以作为新的文件，包括标签文件，属性文件，流程文件等

ChatGPT 告诉我说现有的 SQL 数据库有对于 JSON 的部分支持，不过还没有去验证好不好用，以及查询效率如何。
不过好像是通过存储 JSON 的字符串，然后现场解析完成的。如此看来效率一定不会很高。
使用 Mongodb 也是一种方案。
最坏的情况就是自己构建数据库。

这么看，考虑到记录的格式相当复杂，不如就采用 JSON 格式。
之后，一些信息维度固定之后，再考虑转表格格式。
事实上，也可以额外制作索引来提高查询效率。

## 2024-09-28

数据存储在统一位置，不过可以分区；
系统主要对这些数据进行可视化，对于文件本身的展示是可选的；
即，即使没有原始文件，也能够查找，探索，和组织他们。

需要一些索引，以应对当数据规模提高后的效率问题，不过当前可以先不考虑。

对于单个文件的记录，通过一个 JSON 格式记录；
包含常规属性和自定义属性；

一个文件所带的属性是由他的标签决定的；
常规属性可以认为是所有文件都有一个“文件”标签，这个标签定义了一些属性；
标签应当注册后使用；但为了方便，会给自动产生临时标签，供单文件使用；

单文件记录格式：

File = { Tag } \
Tag = { Tag | Key: Value }

文件由一组标签描述，标签则由子标签，或是键值对表述；
默认文件包含标签 properties (?) 比如记录大小，名称，路径，创建时间，修改时间等等；
或者将这些属性设为默认存在的标签，直接放在根上；

创建或修改这个文件管理系统时，不会去改变系统的文件管理系统；因此直接使用文件的路径作为文件的唯一标识；
至于之后要是修改了系统文件结构，可能需要手动或是半自动地匹配识别这些文件，更新路径（去找对应的文件时）；

注册标签统一管理，初步可以不考虑分页；后续太多了可以考虑产生命名空间，分开存储；
这一点类似于单文件信息记录的存储方式；
在最开始，甚至可以和文件信息存在一起（将标签视为文件的一种）；

标签的管理结构需要仔细考虑一下：标签下的子标签不一定相互排斥，可能存在重叠；但有时也想要记录他们的互斥关系；
例如 图片 - 人物图片，风景图片 也可能是既包含人又包含风景的图片；
再比如 图片 - 照片，AI 生成图片 就是相互排斥的；

一种解决方案是，将图片 double 出两个虚拟节点（图片1，图片2），然后将互斥的标签挂载到同一个子节点上；
具体还需要再想一下；
